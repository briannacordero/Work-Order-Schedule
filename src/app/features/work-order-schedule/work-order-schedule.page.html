<div class="page">
  <header class="page__header">
    <h1 class="page__title">Work Orders</h1>

    <div class="page__headerBar">
      <div class="page__controls">
        <span class="page__controlsLabel">Timescale</span>

        <app-timescale-select
          [value]="timescale"
          (valueChange)="onTimescaleChange($event)"
        ></app-timescale-select>
      </div>

      <button
        *ngIf="timescale === 'day' || timescale === 'week'"
        class="btn-jump"
        type="button"
        (click)="viewport.jumpToNow()"
      >
        Current {{ timescale === 'week' ? 'Week' : 'Day' }}
      </button>
    </div>
  </header>

    <app-timeline-viewport
    [timescale]="timescale"
    [orders]="orders"
    (createOrder)="onCreateOrder($event)"
    (editOrder)="onEditOrder($event)"
    (deleteOrder)="onDeleteOrder($event)"
    #viewport
  ></app-timeline-viewport>  

    <app-work-order-panel
    [open]="panelOpen"
    [mode]="panelMode"
    [initial]="selectedOrder"
    [workCenterId]="panelMode === 'create' ? createContext?.workCenterId : selectedOrder?.workCenterId"
    [prefillStartDateIso]="undefined"
    [existingOrders]="orders"
    (close)="onClosePanel()"
    (save)="onSaveOrder($event)"
    ></app-work-order-panel>

</div>
